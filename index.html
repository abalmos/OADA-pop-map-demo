<!DOCTYPE html>
<html>
<head>
  <title>OADA Pop-Map Demo</title>

  <meta charset=utf-8 />
  <meta name='viewport' content='width=device-width, intial=scale=1.0' />
  
  <!-- react.js scripts -->
  <script src="http://fb.me/react-0.11.1.js"></script>
  <script src="http://fb.me/JSXTransformer-0.11.1.js"></script>

  <!-- leaflet scripts and styles -->
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />

  <!-- styling - put in another file later -->
  <style type="text/css">
    .map {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      height: 50%;
    }
    .table {
      position: absolute;
      top: 50%;
    }
  </style>
</head>
<body>

  <div id='map'></div>
  <div id='table'></div>

<script type="text/jsx">
    /** @jsx React.DOM */
    
    var Map = React.createClass({
      createMap: function(element) {
        var map = L.map(element);
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
          }).addTo(map);
        return map;
      },

      setupMap: function() {
        this.map.setView([this.props.lat, this.props.lon], this.props.zoom);
      },

      componentDidMount: function() {
        if(this.props.createMap) {
          this.map = this.props.createMap(this.getDOMNode());
        } else {
          this.map = this.createMap(this.getDOMNode());
        }

        this.setupMap();
      },

      render: function() {
        return (<div className="map"></div>);
      }
    });

    
    var reactComponentMap = React.renderComponent(
      <Map lat="60.0" lon="10.0" zoom="10"/>,
      document.getElementById('map'),
      function() {
        console.log('map react component callback');
      });

  </script>


</body>
</html>

